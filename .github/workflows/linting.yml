name: Linting
on: [push]
jobs:
    php-cs-fixer:
        name: PHP-CS-Fixer
        container:
            image: dockware/flex:latest
            options: --user root
        runs-on: ubuntu-latest

        strategy:
            matrix:
                php-version: [7.4, 8.0, 8.1]

        steps:
            - name: Set up PHP
              uses: shivammathur/setup-php@v2
              with:
                  php-version: ${{ matrix.php-version }}

            - name: Check out code
              uses: actions/checkout@v3

            -   name: Cache Composer packages
                id: composer-cache
                uses: actions/cache@v2
                with:
                    path: vendor
                    key: ${{ runner.os }}-php-${{ hashFiles('**/composer.lock') }}
                    restore-keys: |
                        ${{ runner.os }}-php-

            - name: Install dependencies
              run: 'composer install --prefer-dist --no-ansi --no-interaction --no-progress --optimize-autoloader'

            - name: Run PHP CS Fixer
              run: './vendor/bin/php-cs-fixer fix --dry-run'